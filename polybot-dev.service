[Unit]
Description=Polybot Telegram Bot Dev Service
After=network.target

[Service]
WorkingDirectory=/home/ubuntu/PolybotProject
Environment="TELEGRAM_BOT_TOKEN=7709145324:AAG9ZaM1wtZ-K-HDlYrVz_8p4QUD9NExsks"
Environment="YOLO_SERVICE_URL=http://10.0.1.17:8080"
Environment="BOT_APP_URL=https://maisadev.fursa.click"
Environment="S3_BUCKET_NAME=maisa-dev-bucket"
Environment="PYTHONUNBUFFERED=1"

ExecStart=/home/ubuntu/PolybotProject/venv/bin/python3 -m polybot.app
ExecStopPost=/usr/bin/fuser -k 8443/tcp
Restart=always
RestartSec=5
StandardOutput=journal
StandardError=journal

# ðŸ›¡ Prevent OOM Kills (optional soft limits)
MemoryMax=256M
MemorySwapMax=0

[Install]
WantedBy=multi-user.target
